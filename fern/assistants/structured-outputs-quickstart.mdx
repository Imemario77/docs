---
title: Structured outputs quickstart
subtitle: Get started with structured data extraction in 5 minutes
slug: assistants/structured-outputs-quickstart
---

## Overview

This quickstart guide will help you set up structured outputs to automatically extract customer information from phone calls. In just a few minutes, you'll create a structured output, link it to an assistant, and test data extraction.

### What are structured outputs?

Structured outputs are AI-powered data extraction templates that automatically capture and organize information from conversations. They work by:

1. **Listening to conversations** - As your assistant talks with customers, structured outputs analyze the conversation in real-time
2. **Extracting key information** - Based on your defined schema, they identify and extract relevant data points like names, emails, preferences, and issues
3. **Validating and formatting** - The extracted data is validated against your schema rules and formatted into clean, structured JSON
4. **Delivering results** - The structured data is available immediately after the call ends via API or webhooks

### When are structured outputs generated?

Structured outputs are processed:
- **During the call** - Data is extracted in real-time as the conversation happens
- **After call completion** - Final validation and formatting occurs when the call ends
- **Available via** - Call artifacts in the API response or webhook events

### Why use structured outputs?

- **Automate data entry** - No more manual transcription or form filling
- **Ensure consistency** - Every call captures the same structured information
- **Enable integrations** - Automatically sync data to CRMs, ticketing systems, or databases
- **Improve analytics** - Structured data is easier to analyze and report on

## What you'll build

A customer support assistant that automatically extracts:
- Customer name and contact details
- Issue description and priority
- Requested follow-up actions

## Prerequisites

<CardGroup cols={2}>
  <Card title="Vapi account" icon="user">
    Sign up at [dashboard.vapi.ai](https://dashboard.vapi.ai)
  </Card>
  <Card title="API key" icon="key">
    Get your API key from the Dashboard settings
  </Card>
</CardGroup>

## Step 1: Create your structured output

You can create structured outputs using either the Dashboard UI or the API.

### Option A: Using the Dashboard (Recommended for beginners)

<Steps>
  <Step title="Navigate to Structured Outputs">
    1. Log in to [dashboard.vapi.ai](https://dashboard.vapi.ai)
    2. Click on **Structured Outputs** in the left sidebar
    3. Click **Create New Structured Output**
  </Step>
  
  <Step title="Configure Basic Settings">
    1. **Name**: Enter "Support Ticket"
    2. **Type**: Select "AI" (for automatic extraction)
    3. **Description**: Add "Extract support ticket information from customer calls"
  </Step>
  
  <Step title="Define Your Schema">
    Use the visual schema builder or paste this JSON directly:
    ```json
    {
      "type": "object",
      "properties": {
        "customer": {
          "type": "object",
          "properties": {
            "name": {"type": "string", "description": "Customer full name"},
            "email": {"type": "string", "format": "email", "description": "Customer email"},
            "phone": {"type": "string", "description": "Customer phone number"}
          },
          "required": ["name"]
        },
        "issue": {
          "type": "object",
          "properties": {
            "description": {"type": "string", "description": "Issue description"},
            "category": {
              "type": "string",
              "enum": ["billing", "technical", "general", "complaint"],
              "description": "Issue category"
            },
            "priority": {
              "type": "string",
              "enum": ["low", "medium", "high", "urgent"],
              "description": "Priority level"
            }
          },
          "required": ["description", "category"]
        }
      },
      "required": ["customer", "issue"]
    }
    ```
  </Step>
  
  <Step title="Save and Copy ID">
    1. Click **Create Structured Output**
    2. Copy the generated ID from the details page
    3. You'll use this ID to link to your assistant
  </Step>
</Steps>

### Option B: Using the API

Define what information you want to extract using a [JSON Schema](https://json-schema.org/learn/getting-started-step-by-step). JSON Schema is a standard for describing data structures - [learn more about JSON Schema here](https://json-schema.org/understanding-json-schema/).

<CodeBlocks>
```bash title="cURL"
curl -X POST https://api.vapi.ai/structured-output \
  -H "Authorization: Bearer $VAPI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Support Ticket",
    "type": "ai",
    "description": "Extract support ticket information from customer calls",
    "schema": {
      "type": "object",
      "properties": {
        "customer": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Customer full name"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "Customer email address"
            },
            "phone": {
              "type": "string",
              "description": "Customer phone number"
            }
          },
          "required": ["name"]
        },
        "issue": {
          "type": "object",
          "properties": {
            "description": {
              "type": "string",
              "description": "Description of the customer issue"
            },
            "category": {
              "type": "string",
              "enum": ["billing", "technical", "general", "complaint"],
              "description": "Issue category"
            },
            "priority": {
              "type": "string",
              "enum": ["low", "medium", "high", "urgent"],
              "description": "Issue priority level"
            }
          },
          "required": ["description", "category"]
        },
        "followUp": {
          "type": "object",
          "properties": {
            "required": {
              "type": "boolean",
              "description": "Whether follow-up is needed"
            },
            "method": {
              "type": "string",
              "enum": ["email", "phone", "none"],
              "description": "Preferred follow-up method"
            },
            "notes": {
              "type": "string",
              "description": "Additional notes for follow-up"
            }
          }
        }
      },
      "required": ["customer", "issue"]
    }
  }'
```

```javascript title="Node.js"
const response = await fetch('https://api.vapi.ai/structured-output', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.VAPI_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: "Support Ticket",
    type: "ai",
    description: "Extract support ticket information from customer calls",
    schema: {
      type: "object",
      properties: {
        customer: {
          type: "object",
          properties: {
            name: {
              type: "string",
              description: "Customer full name"
            },
            email: {
              type: "string",
              format: "email",
              description: "Customer email address"
            },
            phone: {
              type: "string",
              description: "Customer phone number"
            }
          },
          required: ["name"]
        },
        issue: {
          type: "object",
          properties: {
            description: {
              type: "string",
              description: "Description of the customer issue"
            },
            category: {
              type: "string",
              enum: ["billing", "technical", "general", "complaint"],
              description: "Issue category"
            },
            priority: {
              type: "string",
              enum: ["low", "medium", "high", "urgent"],
              description: "Issue priority level"
            }
          },
          required: ["description", "category"]
        },
        followUp: {
          type: "object",
          properties: {
            required: {
              type: "boolean",
              description: "Whether follow-up is needed"
            },
            method: {
              type: "string",
              enum: ["email", "phone", "none"],
              description: "Preferred follow-up method"
            },
            notes: {
              type: "string",
              description: "Additional notes for follow-up"
            }
          }
        }
      },
      required: ["customer", "issue"]
    }
  })
});

const structuredOutput = await response.json();
console.log('Created structured output:', structuredOutput.id);
// Save this ID - you'll need it in the next step
```

```python title="Python"
import requests
import os

response = requests.post(
    'https://api.vapi.ai/structured-output',
    headers={
        'Authorization': f'Bearer {os.environ["VAPI_API_KEY"]}',
        'Content-Type': 'application/json'
    },
    json={
        "name": "Support Ticket",
        "type": "ai",
        "description": "Extract support ticket information from customer calls",
        "schema": {
            "type": "object",
            "properties": {
                "customer": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "Customer full name"
                        },
                        "email": {
                            "type": "string",
                            "format": "email",
                            "description": "Customer email address"
                        },
                        "phone": {
                            "type": "string",
                            "description": "Customer phone number"
                        }
                    },
                    "required": ["name"]
                },
                "issue": {
                    "type": "object",
                    "properties": {
                        "description": {
                            "type": "string",
                            "description": "Description of the customer issue"
                        },
                        "category": {
                            "type": "string",
                            "enum": ["billing", "technical", "general", "complaint"],
                            "description": "Issue category"
                        },
                        "priority": {
                            "type": "string",
                            "enum": ["low", "medium", "high", "urgent"],
                            "description": "Issue priority level"
                        }
                    },
                    "required": ["description", "category"]
                },
                "followUp": {
                    "type": "object",
                    "properties": {
                        "required": {
                            "type": "boolean",
                            "description": "Whether follow-up is needed"
                        },
                        "method": {
                            "type": "string",
                            "enum": ["email", "phone", "none"],
                            "description": "Preferred follow-up method"
                        },
                        "notes": {
                            "type": "string",
                            "description": "Additional notes for follow-up"
                        }
                    }
                }
            },
            "required": ["customer", "issue"]
        }
    }
)

structured_output = response.json()
print(f'Created structured output: {structured_output["id"]}')
# Save this ID - you'll need it in the next step
```
</CodeBlocks>

<Check>
Save the returned `id` from the response - you'll need it to link to your assistant.
</Check>

## Step 2: Create an assistant with structured outputs

Now create an assistant that uses your structured output:

<CodeBlocks>
```bash title="cURL"
curl -X POST https://api.vapi.ai/assistant \
  -H "Authorization: Bearer $VAPI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Customer Support Agent",
    "firstMessage": "Hello! I'\''m here to help you with your support request. Can you please tell me your name and describe the issue you'\''re experiencing?",
    "model": {
      "provider": "openai",
      "model": "gpt-4-turbo-preview",
      "messages": [
        {
          "role": "system",
          "content": "You are a helpful customer support agent. Gather the customer'\''s information and understand their issue. Be empathetic and professional."
        }
      ]
    },
    "voice": {
      "provider": "vapi",
      "voiceId": "jennifer"
    },
    "artifactPlan": {
      "structuredOutputIds": ["YOUR_STRUCTURED_OUTPUT_ID_HERE"]
    }
  }'
```

```javascript title="Node.js"
const assistant = await fetch('https://api.vapi.ai/assistant', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.VAPI_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: "Customer Support Agent",
    firstMessage: "Hello! I'm here to help you with your support request. Can you please tell me your name and describe the issue you're experiencing?",
    model: {
      provider: "openai",
      model: "gpt-4-turbo-preview",
      messages: [
        {
          role: "system",
          content: "You are a helpful customer support agent. Gather the customer's information and understand their issue. Be empathetic and professional."
        }
      ]
    },
    voice: {
      provider: "vapi",
      voiceId: "jennifer"
    },
    artifactPlan: {
      structuredOutputIds: [structuredOutput.id] // Use the ID from step 1
    }
  })
}).then(res => res.json());

console.log('Created assistant:', assistant.id);
```

```python title="Python"
assistant_response = requests.post(
    'https://api.vapi.ai/assistant',
    headers={
        'Authorization': f'Bearer {os.environ["VAPI_API_KEY"]}',
        'Content-Type': 'application/json'
    },
    json={
        "name": "Customer Support Agent",
        "firstMessage": "Hello! I'm here to help you with your support request. Can you please tell me your name and describe the issue you're experiencing?",
        "model": {
            "provider": "openai",
            "model": "gpt-4-turbo-preview",
            "messages": [
                {
                    "role": "system",
                    "content": "You are a helpful customer support agent. Gather the customer's information and understand their issue. Be empathetic and professional."
                }
            ]
        },
        "voice": {
            "provider": "vapi",
            "voiceId": "jennifer"
        },
        "artifactPlan": {
            "structuredOutputIds": [structured_output["id"]]  # Use the ID from step 1
        }
    }
)

assistant = assistant_response.json()
print(f'Created assistant: {assistant["id"]}')
```
</CodeBlocks>

## Step 3: Test with a phone call

Make a test call to your assistant:

<CodeBlocks>
```bash title="cURL"
curl -X POST https://api.vapi.ai/call \
  -H "Authorization: Bearer $VAPI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "assistantId": "YOUR_ASSISTANT_ID_HERE",
    "customer": {
      "number": "+1234567890"
    }
  }'
```

```javascript title="Node.js"
const call = await fetch('https://api.vapi.ai/call', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.VAPI_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    assistantId: assistant.id,
    customer: {
      number: "+1234567890" // Replace with your phone number
    }
  })
}).then(res => res.json());

console.log('Call initiated:', call.id);
```

```python title="Python"
call_response = requests.post(
    'https://api.vapi.ai/call',
    headers={
        'Authorization': f'Bearer {os.environ["VAPI_API_KEY"]}',
        'Content-Type': 'application/json'
    },
    json={
        "assistantId": assistant["id"],
        "customer": {
            "number": "+1234567890"  # Replace with your phone number
        }
    }
)

call = call_response.json()
print(f'Call initiated: {call["id"]}')
```
</CodeBlocks>

<Tip>
During the call, try saying something like: "Hi, my name is John Smith. My email is john@example.com. I'm having trouble logging into my account - it keeps showing an error message. This is pretty urgent for me."
</Tip>

## Step 4: Retrieve extracted data

After the call ends, retrieve the extracted information:

<CodeBlocks>
```bash title="cURL"
curl -X GET "https://api.vapi.ai/call/YOUR_CALL_ID_HERE" \
  -H "Authorization: Bearer $VAPI_API_KEY"
```

```javascript title="Node.js"
// Wait a few seconds after call ends for processing
setTimeout(async () => {
  const callData = await fetch(`https://api.vapi.ai/call/${call.id}`, {
    headers: {
      'Authorization': `Bearer ${process.env.VAPI_API_KEY}`
    }
  }).then(res => res.json());

  const outputs = callData.artifact?.structuredOutputs;
  
  if (outputs) {
    Object.entries(outputs).forEach(([outputId, data]) => {
      console.log('Extracted Support Ticket:');
      console.log(JSON.stringify(data.result, null, 2));
    });
  }
}, 5000);
```

```python title="Python"
import time
import json

# Wait a few seconds after call ends for processing
time.sleep(5)

call_data = requests.get(
    f'https://api.vapi.ai/call/{call["id"]}',
    headers={
        'Authorization': f'Bearer {os.environ["VAPI_API_KEY"]}'
    }
).json()

outputs = call_data.get('artifact', {}).get('structuredOutputs', {})

for output_id, data in outputs.items():
    print('Extracted Support Ticket:')
    print(json.dumps(data['result'], indent=2))
```
</CodeBlocks>

### Expected output

You should see extracted data like this:

```json
{
  "customer": {
    "name": "John Smith",
    "email": "john@example.com",
    "phone": "+1234567890"
  },
  "issue": {
    "description": "Unable to login to account, receiving error message",
    "category": "technical",
    "priority": "urgent"
  },
  "followUp": {
    "required": true,
    "method": "email",
    "notes": "Customer needs immediate assistance with login issue"
  }
}
```

## Step 5: Set up webhook (optional)

To automatically receive extracted data when calls end, set up a webhook:

<CodeBlocks>
```javascript title="Express.js webhook handler"
const express = require('express');
const app = express();

app.use(express.json());

app.post('/vapi/webhook', (req, res) => {
  const { type, call } = req.body;
  
  if (type === 'call.ended') {
    const outputs = call.artifact?.structuredOutputs;
    
    if (outputs) {
      Object.entries(outputs).forEach(([outputId, data]) => {
        if (data.result) {
          // Process the extracted support ticket
          console.log('New support ticket:', data.result);
          
          // Example: Create ticket in your system
          createSupportTicket({
            customer: data.result.customer,
            issue: data.result.issue,
            priority: data.result.issue.priority,
            followUp: data.result.followUp
          });
        }
      });
    }
  }
  
  res.status(200).send('OK');
});

function createSupportTicket(ticketData) {
  // Your ticket creation logic here
  console.log('Creating ticket in system:', ticketData);
}

app.listen(3000, () => {
  console.log('Webhook server running on port 3000');
});
```

```python title="Flask webhook handler"
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/vapi/webhook', methods=['POST'])
def vapi_webhook():
    data = request.json
    
    if data.get('type') == 'call.ended':
        call = data.get('call', {})
        outputs = call.get('artifact', {}).get('structuredOutputs', {})
        
        for output_id, output_data in outputs.items():
            if output_data.get('result'):
                # Process the extracted support ticket
                print('New support ticket:', output_data['result'])
                
                # Example: Create ticket in your system
                create_support_ticket({
                    'customer': output_data['result']['customer'],
                    'issue': output_data['result']['issue'],
                    'priority': output_data['result']['issue']['priority'],
                    'followUp': output_data['result']['followUp']
                })
    
    return jsonify({'status': 'ok'}), 200

def create_support_ticket(ticket_data):
    # Your ticket creation logic here
    print('Creating ticket in system:', ticket_data)

if __name__ == '__main__':
    app.run(port=3000)
```
</CodeBlocks>

Then update your assistant with the webhook URL:

```bash
curl -X PATCH "https://api.vapi.ai/assistant/YOUR_ASSISTANT_ID" \
  -H "Authorization: Bearer $VAPI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "server": {
      "url": "https://your-domain.com/vapi/webhook"
    }
  }'
```

## Next steps

<CardGroup cols={2}>
  <Card title="Explore schema types" icon="code" href="/assistants/structured-outputs#schema-types">
    Learn about different data types and validation options
  </Card>
  
  <Card title="Custom models" icon="brain" href="/assistants/structured-outputs#custom-models">
    Configure different AI models for extraction
  </Card>
  
  <Card title="Advanced examples" icon="rocket" href="/assistants/structured-outputs-examples">
    See complex real-world extraction scenarios
  </Card>
  
  <Card title="API reference" icon="book" href="/api-reference#structured-output">
    Complete API documentation for structured outputs
  </Card>
</CardGroup>

## Common patterns

### Multiple extractions

You can attach multiple structured outputs to extract different types of data:

```javascript
{
  artifactPlan: {
    structuredOutputIds: [
      "550e8400-e29b-41d4-a716-446655440001",    // Customer details extraction
      "550e8400-e29b-41d4-a716-446655440002",    // Appointment requests extraction  
      "550e8400-e29b-41d4-a716-446655440003"     // Satisfaction feedback extraction
    ]
  }
}
```

<Note>The `structuredOutputIds` are UUIDs returned when you create each structured output configuration.</Note>

### Conditional extraction

Use conditional logic in your schema to handle different scenarios:

```json
{
  "if": {
    "properties": {
      "requestType": {"const": "appointment"}
    }
  },
  "then": {
    "required": ["preferredDate", "preferredTime"]
  }
}
```

### Validation patterns

Common validation patterns for reliable extraction:

```json
{
  "email": {
    "type": "string",
    "format": "email",
    "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
  },
  "phone": {
    "type": "string",
    "pattern": "^\\+?[1-9]\\d{1,14}$"
  },
  "zipCode": {
    "type": "string",
    "pattern": "^\\d{5}(-\\d{4})?$"
  }
}
```

## Tips for success

<Note>
**Best practices for reliable extraction:**
- Start with required fields only for critical data
- Use enums for categorical data to ensure consistency
- Add descriptions to help the AI understand context
- Test with real conversations before production use
- Monitor extraction success rates and iterate on schemas
</Note>

## Troubleshooting

| Issue | Solution |
|-------|----------|
| No data extracted | Verify the information was mentioned in the call and check schema validity |
| Partial extraction | Make non-critical fields optional and simplify nested structures |
| Incorrect values | Add more specific validation patterns and field descriptions |
| Extraction fails | Check API logs, verify assistant configuration, and test with simpler schema |

## Get help

Need assistance? We're here to help:
- [API Documentation](/api-reference)
- [Discord Community](https://discord.gg/pUFNcf2WmH)
- [Support](mailto:support@vapi.ai)